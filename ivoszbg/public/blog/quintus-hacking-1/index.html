<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">








    






<link rel="icon" type="image/ico" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="http://localhost:1313/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:1313/apple-touch-icon.png">

<meta name="description" content=""/>



<title>
    
    Adventures with the Volla Phone Quintus - part 1 | Ivaylo Ivanov
    
</title>

<link rel="canonical" href="http://localhost:1313/blog/quintus-hacking-1/"/>

<meta property="og:url" content="http://localhost:1313/blog/quintus-hacking-1/">
  <meta property="og:site_name" content="Ivaylo Ivanov">
  <meta property="og:title" content="Adventures with the Volla Phone Quintus - part 1">
  <meta property="og:description" content="Initial efforts # Following the standard procedure, I first started by unlocking the phone bootloader, which was easy. I flashed a verity disabled vbmeta and I was ready to start experimenting with custom boot images.
LK expects a gzipped kernel image and a valid dtb that it can append a dtbo to. Unfortunately, the device has two very annoying quirks:
LK has its own device tree and needs to apply the dtbo. That means you can’t just erase the dtbo partition. The dtbo has 300 lines of required nodes for LK to boot, which means that making it apply to a mainline device tree will be ugly. Therefore, the approach I’m taking is to use a secondary bootloader (loaded as a kernel image by LK), which later on can boot mainline linux without the ugliness. This is the command I used to make a boot image:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2025-04-05T11:27:50+03:00">
    <meta property="article:modified_time" content="2025-04-05T11:27:50+03:00">












<link rel="stylesheet" href="/assets/combined.min.c84ef7d767cb9811a35d21d1f0bcb15f49465c1e026bee0cce5f22e22a0d327c.css" media="all">











    




</head>







<body class="dark">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="http://localhost:1313/">Ivaylo Ivanov</a>
    </h1>

    <div class="header-menu">
        

        
        

        <p
            class="small ">
            <a href="/" >
                /home
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/blog" >
                /blogs
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/portfolio" >
                /achievements
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      




<div class="breadcrumbs"><a href="/">Home</a><span class="breadcrumbs-separator">/</span><a href="/blog/">Blogs</a><span class="breadcrumbs-separator">/</span>
        <a href="/blog/quintus-hacking-1/">Adventures with the Volla Phone Quintus - part 1</a></div>


<div >
  <article>
    <header class="single-intro-container">
        
        <h1 class="single-title">Adventures with the Volla Phone Quintus - part 1</h1>
        
        <div class="single-subsummary">
          
          <div>
            
            <p class="single-date">
              <time datetime="2025-04-05T11:27:50&#43;03:00">April 5, 2025</time>
            </p>
          </div>
        </div>
        
    </header>
    
    <div class="single-content">
      <h3 class="heading" id="initial-efforts">
  Initial efforts
  <a class="anchor" href="#initial-efforts">#</a>
</h3>
<p>Following the standard procedure, I first started by unlocking the phone bootloader, which was easy. I flashed a verity disabled vbmeta and I was ready to start experimenting with custom boot images.</p>
<p>LK expects a gzipped kernel image and a valid dtb that it can append a dtbo to. Unfortunately, the device has two very annoying quirks:</p>
<ul>
<li>LK has its own device tree and needs to apply the dtbo. That means you can&rsquo;t just erase the dtbo partition.</li>
<li>The dtbo has 300 lines of required nodes for LK to boot, which means that making it apply to a mainline device tree will be ugly.</li>
</ul>
<p>Therefore, the approach I&rsquo;m taking is to use a secondary bootloader (loaded as a kernel image by LK), which later on can boot mainline linux without the ugliness.
This is the command I used to make a boot image:</p>
<pre tabindex="0"><code>python3 mkbootimg/mkbootimg.py \
--kernel u-boot.gz \
--ramdisk fitImage \
--dtb disassembly/boot/out/dtb \
--header_version 2 \
--os_version 14.0.0 \
--os_patch_level 2024-10 \
--cmdline &#34;bootopt=64S3,32N2,64N2&#34; \
--base 0x0 \
--kernel_offset 0x40080000 \
--ramdisk_offset 0x51100000 \
--tags_offset 0x47c80000 \
--dtb_offset 0x47c80000 \
--pagesize 2048 \
--output boot.img
</code></pre><h3 class="heading" id="wiring-up-uart">
  Wiring up uart
  <a class="anchor" href="#wiring-up-uart">#</a>
</h3>
<p>I began testing if uniLoader boots by setting some bits in the wdt to see if it would reboot. Luckily it did, but the framebuffer would not update, so I can&rsquo;t really debug what is going on without uart access.</p>
<p>To obtain such, the phone needs to be disassembled.</p>
<div style="display: flex; justify-content: space-between; align-items: center;">
    <div style="flex: 1; padding-right: 10px;">
        <figure class="">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/20250404_174653.jpg" >
    </div>

    
</figure>
    </div>
    <div style="flex: 1;">
        <figure class="">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/20250404_175713.jpg" >
    </div>

    
</figure>
    </div>
</div>


<p>The RX and TX pins are exposed on the left side of the motherboard. The pins are pretty small, but for debugging wiring up TX is enough.</p>
<div style="display: flex; justify-content: space-between; align-items: center;">
    <div style="flex: 1; padding-right: 10px;">
        <figure class="">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/20250404_175721.jpg" >
    </div>

    
</figure>
    </div>
    <div style="flex: 1;">
        <figure class="">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/20250404_182146.jpg" >
    </div>

    
</figure>
    </div>
</div>


<p>So, after connecting TX from the phone to the RX of my adapter and wiring up GND, I can fire up picocom to get serial logs with this command:</p>
<pre tabindex="0"><code>sudo picocom -b 921600 /dev/ttyUSB0
</code></pre><p>














<figure class=" img-center">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/bootloader-logs.png#center" >
    </div>

    
</figure>
</p>
<h3 class="heading" id="bringing-up-u-boot">
  Bringing up u-boot
  <a class="anchor" href="#bringing-up-u-boot">#</a>
</h3>
<p>In order to get a more verbose second stage bootloader, I started working on u-boot. A friend of mine <a href="https://github.com/MT6878-Mainline/u-boot">had gotten it to work</a> on his Dimensity 7300 device, which seemed similar enough, so I forked his repo and changed a few MMIO addresses, according to what Quintus has.</p>
<p>














<figure class=" img-center">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/u-boot-expection.png#center" >
    </div>

    
</figure>
</p>
<p>It was relatively simple. The hardest part was figuring out a rather hilarious memory issue, and that took 5 minutes.</p>
<p>














<figure class=" img-center">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/u-boot-memory.png#center" >
    </div>

    
</figure>
</p>
<h3 class="heading" id="what-about-mainline-linux">
  What about Mainline Linux?
  <a class="anchor" href="#what-about-mainline-linux">#</a>
</h3>
<p>Since I don&rsquo;t have wired up RX, I needed a way to get Linux in the memory and tell u-boot to jump to it. The latter is easy, setting the following kconfig options makes it automatically jump to the given address:</p>
<pre tabindex="0"><code>CONFIG_USE_BOOTCOMMAND=y
CONFIG_BOOTCOMMAND=&#34;bootm 0x51100000&#34;
</code></pre><p>I cloned linux-next, wrote a simple device tree that has nodes for uart, cpus via PSCI and timer.</p>
<pre tabindex="0"><code>/ {
	...
	aliases {
		serial0 = &amp;uart0;
	};

	chosen {
		stdout-path = &#34;serial0:921600n8&#34;;
	};

	memory@40000000 {
		device_type = &#34;memory&#34;;
		reg = &lt;0x40000000 0x20000000&gt;;
	};
	...
	cpus {
		#address-cells = &lt;1&gt;;
		#size-cells = &lt;0&gt;;

		cpu0: cpu@0 {
			device_type = &#34;cpu&#34;;
			compatible = &#34;arm,cortex-a55&#34;;
			reg = &lt;0x0&gt;;
			enable-method = &#34;psci&#34;;
		};
		...
	};

	soc {
		...
		gic: interrupt-controller@c000000 {
			...

			ppi-partitions {
				...
			};
		};

		uart0: serial@11002000 {
			compatible = &#34;mediatek,mt6797-uart&#34;,
				     &#34;mediatek,mt6577-uart&#34;;
			...
		};
	};

	timer {
		compatible = &#34;arm,armv8-timer&#34;;
		...
	};
</code></pre><p>Since the previous bootloader loads the ramdisk at 0x51100000, I made a FIT image containing the new kernel and dt. After packaging it all into a boot.img and flashing it with mtkclient, it &lsquo;just works&rsquo;.</p>
<p>














<figure class=" img-center">

    <div class="img-container" >
        <img loading="lazy" alt="alt" src="/images/quintus-part1/mainline-booting.png#center" >
    </div>

    
</figure>
</p>
<h3 class="heading" id="conclusion">
  Conclusion
  <a class="anchor" href="#conclusion">#</a>
</h3>
<p>It took a few days of hopes and prayers to get a stable foundation for mainline development. Now that I have a solid boot chain, I can focus on hardware bringup rather than blindly trying to boot things.</p>
<p>I’ll be upstreaming my work in the following weeks/months.</p>
<h3 class="heading" id="useful-links">
  Useful Links
  <a class="anchor" href="#useful-links">#</a>
</h3>
<p>(Note: I am <strong>in no way responsible</strong> for any damage you do to your device by trying to replicate what I&rsquo;ve done. If you want to experiment with flashing directly to your UFS, proceed at your own risk.)</p>
<ul>
<li>my linux-next fork for quintus: <a href="https://github.com/ivoszbg/linux-next/blob/v6.14rc5-quintus/">ivoszbg/linux-next</a></li>
<li>mtkclient: <a href="https://github.com/bkerler/mtkclient">bkerler/mtkclient</a></li>
<li>support for quintus in uniLoader: <a href="https://github.com/ivoszbg/uniLoader/commit/5ee9fd9c1a71168abfac4704e8bb8458a9cfb0dc">ivoszbg/uniLoader</a></li>
</ul>

    </div>
  </article>

  

  

  
  

<div class="single-pagination">
    <hr />

    <div class="flexnowrap">

        <div class="single-pagination-prev">
            
            <div class="single-pagination-container-prev">
                <div class="single-pagination-text">←</div>
                <div class="single-pagination-text">
                    <a href="/blog/s22-bootloop/">
                        Finding the reason behind the infamous S22 boot loops
                    </a>
                </div>
            </div>
            
        </div>

        <div class="single-pagination-next">
            
        </div>

    </div>

    <hr />
</div>



  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  
  





    




  <footer>
    

    
    





    




    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    


  </footer>

  
</body>

<script src="/js/theme-switch.js"></script>
<script defer src="/js/copy-code.js"></script>
</html>
